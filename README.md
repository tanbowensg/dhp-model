#项目简介
这个是 DCE-UI 的数据层。整体使用了 RxJS 5 作为主要架构。目前的形式是通过 restify 暴露 API 接口来使用。但是由于本项目依赖很轻量，而且核心的数据层和 API 的耦合很低，所以也可以很方便地迁移到前端使用，并且理论上可以兼容所有主流前端框架。

#使用方法
`node index.js` 就可以启动项目了。
然后可以向 localhost:4000 发送请求获取数据。具体路由参看 index.js 里的内容。

#命名约定
以 $ 结尾代表这个变量是 Observable。
以 $$ 结尾代表这个变量是 Subject，或者 BehaviorSubject。
以 _ 结尾代表这个变量时 Subscription。

#架构概述
1. 整个数据层的初始化是在 stream/hub.js 中完成的。它会每个数据池暴露出 Observable。
2. stream 目录中的存放的是每个数据池的数据流。每个数据流应该上接 hub 里对应的 Observable。最后暴露出一个 BehaviorSubject 其中是格式化好的，可以直接在页面中展示的 ViewModel 数据。
3. 数据池的更新完全是由 hub 决定的。hub 中的 hub$$ 是整个数据层的唯一的事件分发器。它发布了事件，数据才要更新。它不发布，数据就不用更新。如果要手动更新数据，也应该通过 hub$$ 来发布事件，类似 redux 那种（但是目前还没有实现）。 

#添加新数据流的流程
1. 在 api 目录中添加好数据的 api。
2. 在 stream 中定义好数据流，暴露出 ViewModel。
3. 在 hub 中定义好数据的更新时机和方法，然后把 stream 给接上去。
4. 如果必要的话，在 factory 中定义好数据的格式化类，然后添加到 stream 里。

#待办事项
1. 单元测试
2. 进一步完善注释

#维护者
Bowen